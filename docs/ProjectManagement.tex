%============================ Project Managenent Document ================================
% define document class
\documentclass[
	a4paper               % paper format
%	,10.5pt               % fontsize
	,BCOR=0mm            % Binding correction
	,bibliography=totoc   % If enabled add bibliography to TOC
	,listof=totoc         % If enabled add lists to TOC
%	,bilingual
	,monolingual
	,twoside=false
]{bfhthesis}              % KOMA-script report

\setcounter{secnumdepth}{4}

\PassOptionsToPackage{hyphens}{url}\usepackage[
	hidelinks,
	pdfusetitle,
]{hyperref}
\usepackage{tikzducks}
\usepackage{amsmath}
\usepackage{listings}

\LoadBFHModule{boxes}

\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}

\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
	postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
    backgroundcolor=\color{background},
    literate=
      {:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}

\lstdefinelanguage{canon}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
	postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
}

\hyphenation{ve-ri-fi-ca-ti-on}

\begin{document}

\frontmatter

\title{Bachelor's Thesis}
\subtitle{Unlinkability of Verfiable Credentials in a practical approach
: Project Management Document}
\author{JoÃ«l Gabriel Robles Gasser}
\institution{Bern University of Applied Sciences}
\department{Engineering and Computer Science}
\institute{Computer Science}
\version{0.1}
\advisor{Prof. Dr. Annett Laube \and Prof. Dr. Reto Koenig}
\expert{Dr. Andreas Spichiger}
\degreeprogram{Bachelor of Science in Computer Science}

%----------------  BFH tile page   -----------------------------------------
\maketitle

\addchap{Abstract}
Here an abstract might be placed.


%------------ TABLEOFCONTENTS ----------------
\tableofcontents

%------------ START MAIN PART ----------------
\mainmatter

\chapter{Goal}

\chapter{Risks}
In this chapter we define Risks that may happen in this thesis.

\section{Project Risks}

\subsection{VC}
\begin{itemize}
	\item Risk: There is the possibility that the structure of VCs breaks the unlinkability of BBS
	\item Solution: If that is the case, the stucture of VCs needs to be reworked so there is no linkability
	\item Possibility: Low
\end{itemize}

\subsection{OIDC4VP}
\begin{itemize}
	\item Risk: There is the possibility that the implementation of OIDC4VP leaks data
	\item Solution: If that is the case, the structure of the OIDC4VC protocol needs to be reworked so there are no more data leaks
	\item Possibility: Low
\end{itemize}

\subsection{OIDC4VP}
\begin{itemize}
	\item Risk: There is the possibility that the implementation of OIDC4VP leaks data
	\item Solution: If that is the case, the structure of the OIDC4VC protocol needs to be reworked so there are no more data leaks
	\item Possibility: Low
\end{itemize}
\begin{itemize}
	\item Risk: There is the possibility that the implementation of OIDC4VP breaks the unlinkability of BBS
	\item Solution: If that is the case, the structure of the OIDC4VP protocol needs to be reworked so there is no linkability
	\item Possibility: Medium
\end{itemize}

\subsection{Psuedonyms}
\begin{itemize}
	\item Risk: There is the possibility that the implementation of Pseudonyms breaks the unlinkability of BBS
	\item Solution: If that is the case, the structure of Pseudonyms needs to be reworked, so there is no linkability
	\item Possibility: Low
\end{itemize}

\subsection{Link Secrets}
\begin{itemize}
	\item Risk: There is the possibility that the implementation of Link Secrets breaks the unlinkability of BBS
	\item Solution: If that is the case, the implementation of the Link Secrets needs to be reworked, so there is no linkability
	\item Possibility: Medium
\end{itemize}
\begin{itemize}
	\item Risk: There is the possibility that the implementation of Link Secrets allows the holder of multiple VCs to Link the together on a different Secret
	\item Solution: If that is the case, the implementation of the Link Secrets needs to be reworked so that this is no longer possible
	\item Possibility: Low
\end{itemize}

\section{Environmental risks}

\subsection{Sickness}
\begin{itemize}
	\item Risk: There is a possibility that I may become sick
	\item Solution: If the sickness is less than 1 Week, there is a Buffer in the project plan at the end of the semester for that. If it's more than 1 Week, there is a chance that the Project would need to be moved to another semester
	\item Possibility: Medium
\end{itemize}

\subsection{Hardware}
\begin{itemize}
	\item Risk: There is a possibility that the Hardware used (Laptop) may break due to unknown reasons
	\item Solution: The Deliverables are backed u to GitHub and mirrored to the BFH-TI GitLab. There is also a Backup on other Hardware. There also Backup Hardware if the main Hardware would break
	\item Possibility: Low
\end{itemize}
\begin{itemize}
	\item Risk: There is the possibility that the Backups are not accessible
	\item Solution: For that case there is an also a Backup on different Devices
	\item Possibility: Low
\end{itemize}

\subsection{Project Plan/Ideas}
\begin{itemize}
	\item Risk: There is the possibility that the project plan is bad, so that the Planned time frames are to short
	\item Solution: In that case there is 1 week buffer at the end of the semester. If that is not enough time, then there needs to be an explanation in the documentation why that happened
	\item Possibility: Medium
\end{itemize}
\begin{itemize}
	\item Risk: There is the possibility that the expert of the project may bring new Ideas into the project
	\item Solution: If those ideas further the projects goals, they may be added to the project plan. In that case the Project plan needs to be reworked
	\item Possibility: Low
\end{itemize}

\chapter{Meetings}

\chapter{Found Issues}

While researching for this thesis, many issues where found. This chapter summarizes all the raised issues/written mails.

\section{Github Issues}

\textbf{Typo \& missing check}\\
see: \url{https://github.com/w3c/vc-di-bbs/issues/154}\\
In this issue I mentioned a typo. I also mentioned that there is a missing check for a value in a object, as if that value is empty i could raise an error.
The typo was fixed, but the check was not added.\\

\noindent
\textbf{Missing attibutes}\\
see: \url{https://github.com/w3c/vc-di-bbs/issues/155}\\
In this issue I mentioned that some attibutes used in the algorithm were not passed as parameters. At the same time the authors were changing where all the parameters come from, as the part of the addition of optional features. Error was fixed with the optional features update.\\

\noindent
\textbf{Missing reference}\\
see: \url{https://github.com/w3c/vc-di-bbs/issues/157}\\
In this issue I noted that there was a missing reference to a used algorithm. After search for a bit I found that algorithm defined in an other specification. The error was fixed a standalone pull request.\\

\noindent
\textbf{Missing reference: The second}\\
see: \url{https://github.com/w3c/vc-di-bbs/issues/163}\\
Same as in the above mentioned issue, there was a missing reference. At the same time, the wrong algorithm was called. The called algorithm has been corrected and the reference was added, but the pull request was not approved yet.\\

\noindent
\textbf{Unused variables}\\
see: \url{https://github.com/w3c/vc-di-bbs/issues/164}\\
In a algorithm a variable was defined, but never used. The error was corrected, but the pull request was not accepted yet.\\

\noindent
\textbf{Typo \& missing information}\\
see: \url{https://github.com/w3c/vc-di-bbs/issues/166}\\
There was another small type, which was changed with the next pull request. There was also the problem of how to retrive the public key, as it is used as an input to an algorithm. This information was also added in the same pull request but was not accepted and merged yet.\\

\noindent
\textbf{Add SHA-3}\\
see: \url{https://github.com/w3c/vc-di-bbs/issues/162}\\
In the Data Integrity BBS Cryptosuites\cite{bbsvc} specification, SHA-256 is used for all hashing operation. I suggested adding the information that SHA-3 would also be a possiblity, as the BBS specification also allows hashing with a kmac. This suggestion was rejected, the reason being that a big part of the internet is using SHA-256 and thus the implementation using SHA-256 instead of SHA-3 would be easier.


\section{Written Mails}
While researching OIDC4VP, in the chapters 11.5 and 6 of OpenID for Verifiable Presentations\cite{oidc4vp} it wasn't stated in where the nonce value and the client\_id values should be included. After contacting the authors of the specification, Olivier Terbu responded with the instruction where to add these values in the VP.


% \chapter{Recap of BLS12-381, BBS and Pairings}
% This chapter contains a quick recap about BBS and BLS12-381.
% The Mathematics of these topics are out of scope for this Thesis, so only the top level ideas will be discussed.

% \section{BLS12-381}
% \begin{figure}[h]
%     \centering
% 	\includegraphics[width=4cm]{example-image-duck}
% 	\caption{The BLS12-381 curve}
% 	\label{fig:bls12381}
% \end{figure}
% The Barreto-Lynn-Scott Curves \cite{pairing-friendly-curves} are a group of pairing friendly curves. 
% Specifically the BLS12-381 Curve is used in the BBS Signature Scheme \cite{bbs-signature-scheme}.
% The 12 in the name comes from the embedding degree, the 381 is the amount of bits necessary to represent a point on the curve.
% This Curve is defined as with the following equation $y^2 = x^3 + 4$, where x and y are coordinates on the Field $F_p$.

% \subsection{Field Extensions}
% $G_1$ is the largest is the largest prime order subgroup of the BLS curve.
% For the Pairings discussed in section \ref{sec:pairing} we need multiple points on curves as inputs.
% Besides a point on $G_1$ we also need a point on $G_2$.
% This $G_2$ is an Extension of the Field $F_p$ into the Field $F_{p^2}$.
% This alters the curve equation a bit to $y^2 = x^3 + 4(u + 1)$ where x and y are no longer coordinates but are polynoms of the second order.
% Both $G_1$ and $G_2$ are additive Groups.
% For the Pairings we also need a third Group, this time in the Field $F_{p^{12}}$.
% This is Group is a multiplicative group called $G_T$ in section \ref{sec:pairing}, where x and y are polynoms of the $12^{th}$ order.
% With this we now know all the necessary groups for \ref{sec:bbs}.
% The Basepoints (generators) of both $G_1$ and $G_2$ are defined in \cite{pairing-friendly-curves} as follows (Big-endian order encoded as HEX):\newline

% \boldmath$G_1$(BP1):\newline
% x = 0x17f1d3a73197d7942695638c4fa9ac0fc3688c4f9774b905a14e3a3f171bac586c55e83ff97a1aeffb3af00adb22c6bb
% y = 0x08b3f481e3aaa0f1a09e30ed741d8ae4fcf5e095d5d00af600db18cb2c04b3edd03cc744a2888ae40caa232946c5e7e1\newline\newline
% \boldmath$G_2$(BP2):\newline
% $x_O$ = 0x024aa2b2f08f0a91260805272dc51051c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8
% $x_1$ = 0x13e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e
% $y_O$ = 0x0ce5d527727d6e118cc9cdc6da2e351aadfd9baa8cbdd3a76d429a695160d12c923ac9cc3baca289e193548608b82801
% $y_1$ = 0x0606c4a02ea734cc32acd2b02bc28b99cb3e287e85a763af267492ab572e99ab3f370d275cec1da1aaa9075ff05f79be

% \section{BBS}
% \label{sec:bbs}
% \begin{figure}[h]
%     \centering
% 	\includegraphics[width=4cm]{example-image-duck}
% 	\caption{The Actors of BBS and their connection}
% 	\label{fig:bbstriangle}
% \end{figure}
% The BBS Signature Scheme \cite{bbs-signature-scheme} is a multi-message signature scheme with support for selective disclosure and proof of knowledge of the signature, thus proving unlinkability between different verfiers. 
% Figure \ref{fig:bbstriangle} shows the flows between the different actors.
% For this thesis we define following names for the actors:
% \begin{itemize}
% 	\item Issuer - Issues a signature on a set of messages
% 	\item Holder - Holds the set of messages as well as the signature. Also generates the Proof for the verifier.
% 	\item Verifier - Gets the disclosed messages as well as the proof, which he then verifies
% \end{itemize}
% For the key generation a random scalar \textbf{SK} and the Base Point of $G_2$ are needed.
% Thus the public key (calculated as $SK*BP2$) results in Point on $G_2$.
% This allows for all other calculations (like the signature or the proof) to be done in $G_1$ which in turn makes the algorithm more efficient.


% \section{Pairings}
% \label{sec:pairing}
% For the verification of the BBS signature and proof Pairing-functions are used. The most important part of these functions are their billiniarity i.e.,\newline
% \begin{equation}
% 		e(A, B + B') = e(A, B)e(A, B') \text{and} e(a * A, b * B) = e(A, B)^{ab}
% \end{equation}

% With these characteristics we can understand the equations for verifying the signature and proof.\newline

% \textbf{Example 1. BBS Signature verification}
% \begin{equation}
% 	\begin{split}
% 		Identity_{GT} & = e(A, W + BP2 * e) * e(B, -BP2) \\
% 		& = e(A, BP2 * e)e(A, W)e(B, BP2)^{-1} \\
% 		& = e(A, BP2)^ee(A, SK * BP2)e(B, BP2)^{-1} \\
% 		& = e(A, BP2)^ee(A, BP2)^{SK}e(B, BP2)^{-1} \\
% 		& = e(A, BP2)^{e + SK}e(B, BP2)^{-1} \\
% 		& = e(B * \frac{1}{sk * e}, BP2)^{e + SK}e(B, BP2)^{-1} \\
% 		& = e(B, BP2)^{\frac{e + SK}{e + SK}}e(B, BP2)^{-1} \\
% 		& = e(B, BP2)^1e(B, BP2)^{-1} \\
% 		& = e(B, BP2)^0 \\
% 		& = 1
% 	\end{split}
% \end{equation}

\chapter{First appendix Chapter}



\bibliographystyle{plain}
\bibliography{refs}

\end{document}
